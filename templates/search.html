{% extends "layout.html" %}
{% block title %}Diagnosis{% endblock %}
{% block Diagnosis_active %}active{% endblock %}
{% block body %}

<div class="container" style="max-width: 900px; margin: 0 auto; padding: 20px;">
    <h1 style="text-align: center;">Search Results</h1>

    {% if search_results and search_results|length > 0 %}
    <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
        <tr style="background: #f2f2f2;">
            <th style="padding: 10px;">Photo</th>
            <th style="padding: 10px;">Name</th>
            <th style="padding: 10px;">Speciality</th>
            <th style="padding: 10px;">Gender</th>
            <th style="padding: 10px;">Experience</th>
            <th style="padding: 10px;">Action</th>
        </tr>

        {% for doctor in search_results %}
        <tr style="border-bottom: 1px solid #ddd;">

            <td style="padding: 10px; text-align:center;">
                <img 
                    src="{{ url_for('static', filename='images/doctors/' ~ doctor.image_url) }}"
                    style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover;">
            </td>

            <td style="padding: 10px;">{{ doctor.Name }}</td>
            <td style="padding: 10px;">{{ doctor.speciality }}</td>
            <td style="padding: 10px;">{{ doctor.Gender }}</td>
            <td style="padding: 10px;">{{ doctor.Experience }} years</td>

            <td style="padding: 10px;">
                {% if doctor.id in user_appointments %}
                    <form action="/remove_appointment/{{ doctor.id }}" method="post">
                        <button type="submit" style="background:red;color:white;padding:5px 10px;border:none;">
                            Remove
                        </button>
                    </form>
                {% else %}
                    <form action="/appointment_book/{{ doctor.id }}" method="get">
                        <button type="submit" style="background:blue;color:white;padding:5px 10px;border:none;">
                            Appointment
                        </button>
                    </form>
                {% endif %}
            </td>

        </tr>
        {% endfor %}
    </table>
    {% else %}
        <p style="text-align:center;margin-top:30px;color:red;">
            No doctor found for your search.
        </p>
    {% endif %}
</div>

{% endblock %}
